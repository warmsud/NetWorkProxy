# ========== Providers ==========
proxy-providers:
    'AllBlue':
        type: http
        path: ./proxy_provider/ALLBlue.yaml
        url: https://lws89e.allblueaff.com/gLwybjbY
        interval: 21600
        override:
            additional-prefix: 'ALLBlue |'
    'BitzNet':
        type: http
        path: ./proxy_provider/BitzNet.yaml
        url: https://dir3.bnaffloop.com/#/register?code=uv27OMcz
        interval: 21600
        override:
            additional-prefix: 'BitzNet |'

# ========== Global Config ==========
mixed-port: 7897
allow-lan: true
mode: rule
global-ua: clash-verge/v2.2.3
geodata-mode: true
geodata-loader: standard
unified-delay: true
log-level: warning
ipv6: true
external-controller: 127.0.0.1:9090
tcp-concurrent: true
enable-process: true
find-process-mode: strict
global-client-fingerprint: chrome
keep-alive-interval: 15
geo-auto-update: true
geo-update-interval: 24
geox-url:
    geoip: 'https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat'
    geosite: 'https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat'
    mmdb: 'https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb'
    asn: 'https://cdn.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/GeoLite2-ASN.mmdb'

profile:
    store-selected: true
    store-fake-ip: true

tun:
    enable: false
    device: ClashVergeREV
    stack: mixed
    mtu: 1500
    dns-hijack:
        - 'any:53'
        - 'tcp://any:53'
    auto-route: true
    auto-detect-interface: true

dns:
    enable: true
    ipv6: true
    enhanced-mode: fake-ip
    fake-ip-range: 198.18.0.1/16
    use-hosts: true
    nameserver:
        - https://doh.pub/dns-query
        - https://dns.alidns.com/dns-query
        - 114.114.114.114
        - system
    fake-ip-filter:
        - '+.lan'
        - 'connect.rom.miui.com'
        - '+.miwifi.com'
        - '+.ntp.org'
        - '+.u-tools.cn'
        - '+.mediatek.com'
        - '+.cfprefer1.xyz'
        - '+.wetab.link'
        - '+.tyasaka.xyz'
        # QQ
        - 'localhost.ptlogin2.qq.com'
        - 'localhost.sec.qq.com'
        # WeChat
        - 'localhost.work.weixin.qq.com'
        - '+.weixin.qq.com'
        - '+.wechat.com'
        # Apple 常用服务
        - '+.apple.com'
        - '+.icloud.com'
        - '+.icloud-content.com'
        - '+.me.com'
        - '+.push.apple.com'
        - '+.appldnld.apple.com'
        - '+.itunes.apple.com'
        - '+.mzstatic.com'
        # Windows
        - 'time.windows.com'
        - '+.msftconnecttest.com'
        - '+.msftncsi.com'
        - '+.wpsmail.net'
        - '+.henzanapp.com'
        - '+.pconline.com.cn'

# ========== Rule Providers (可按需替换) ==========
rule-providers:
    ad:
        type: http
        behavior: classical
        url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Advertising/Advertising.yaml
        path: ./rules/ad.yaml
        interval: 86400

    google:
        type: http
        behavior: classical
        url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml
        path: ./rules/google.yaml
        interval: 86400

    microsoft:
        type: http
        behavior: classical
        url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.yaml
        path: ./rules/microsoft.yaml
        interval: 86400

    github:
        type: http
        behavior: classical
        url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.yaml
        path: ./rules/github.yaml
        interval: 86400

    telegram:
        type: http
        behavior: classical
        url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml
        path: ./rules/telegram.yaml
        interval: 86400

    twitter:
        type: http
        behavior: classical
        url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Twitter/Twitter.yaml
        path: ./rules/twitter.yaml
        interval: 86400

    steam:
        type: http
        behavior: classical
        url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Steam/Steam.yaml
        path: ./rules/steam.yaml
        interval: 86400

    epic:
        type: http
        behavior: classical
        url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Epic/Epic.yaml
        path: ./rules/epic.yaml
        interval: 86400

    openai:
        type: http
        behavior: classical
        url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml
        path: ./rules/openai.yaml
        interval: 86400

    copilot:
        type: http
        behavior: classical
        url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Copilot/Copilot.yaml
        path: ./rules/copilot.yaml
        interval: 86400

    bing:
        type: http
        behavior: classical
        url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bing/Bing.yaml
        path: ./rules/bing.yaml
        interval: 86400

    claude:
        type: http
        behavior: classical
        url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Claude/Claude.yaml
        path: ./rules/claude.yaml
        interval: 86400

# ========== Proxy Groups ==========
proxy-groups:
    # —— 业务分组（你的分类）——
    - name: 人工智能
      type: select
      proxies: [自动选择, 香港节点, 低延节点, 亚太节点, 欧美节点, DIRECT]
      interval: 300
      timeout: 3000
      url: https://www.gstatic.com/generate_204
      lazy: true
      icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Copilot.png

    - name: 谷歌服务
      type: select
      proxies: [自动选择, 香港节点, 低延节点, 亚太节点, 欧美节点, DIRECT]
      interval: 300
      timeout: 3000
      url: https://www.google.com/generate_204
      lazy: true
      icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Google_Search.png

    - name: 微软服务
      type: select
      proxies: [自动选择, 香港节点, 低延节点, 亚太节点, 欧美节点, DIRECT]
      interval: 300
      timeout: 3000
      url: https://www.microsoft.com
      lazy: true
      icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Microsoft.png

    - name: 社交服务
      type: select
      proxies: [自动选择, 香港节点, 低延节点, 亚太节点, 欧美节点, DIRECT]
      interval: 300
      timeout: 3000
      url: https://1.1.1.1/generate_204
      lazy: true
      icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Final.png

    - name: 游戏娱乐
      type: select
      proxies: [自动选择, 香港节点, 低延节点, 亚太节点, 欧美节点, DIRECT]
      interval: 300
      timeout: 3000
      url: https://www.gstatic.com/generate_204
      lazy: true
      icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Game.png

    - name: 全球加速
      type: select
      proxies: [自动选择, 香港节点, 低延节点, 亚太节点, 欧美节点, DIRECT]
      interval: 300
      timeout: 3000
      url: https://www.gstatic.com/generate_204
      lazy: true
      icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Global.png

    - name: 本地直连
      type: select
      proxies: [DIRECT]
      icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Loop.png

    - name: 广告拦截
      type: select
      proxies: [REJECT, DIRECT]
      icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Advertising.png

    # 直观看到全部节点
    - name: 全部节点（AllBlue）
      type: select
      use: ['AllBlue', 'BitzNet']
      include-all: true
      interval: 300
      timeout: 3000
      url: https://www.gstatic.com/generate_204
      lazy: true
      icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Cellular.png

    # 全量自动测速
    - name: 自动选择
      type: url-test
      use: ['AllBlue', 'BitzNet']
      include-all: true
      url: https://www.gstatic.com/generate_204
      interval: 300
      timeout: 3000
      tolerance: 50
      lazy: true
      icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Auto.png

    # —— 地区分组（根据节点名包含匹配）——
    - name: 香港节点
      type: select
      use: ['AllBlue', 'BitzNet']
      filter: '(香港|HK|Hong|HKG)'
      include-all: false
      interval: 300
      timeout: 3000
      lazy: true
      icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Hong_Kong.png

    - name: 低延节点
      type: select
      use: ['AllBlue', 'BitzNet']
      filter: '(新加坡|狮城|SG|Sing|马来西亚|MY)'
      include-all: false
      interval: 300
      timeout: 3000
      lazy: true
      icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Available_1.png

    - name: 亚太节点
      type: select
      use: ['AllBlue', 'BitzNet']
      filter: '(台湾|台灣|TW|日本|JP|韩国|KR|越南|VN|泰国|TH|印度|IN|印尼|ID|菲律宾|PH|柬埔寨|KH|孟加拉|BD|斯里兰卡|LK|巴基斯坦|PK|哈萨克|KZ)'
      include-all: false
      interval: 300
      timeout: 3000
      lazy: true
      icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Asia_Map.png

    - name: 欧美节点
      type: select
      use: ['AllBlue', 'BitzNet']
      filter: '(美国|US|英国|UK|加拿大|CA|德国|DE|法国|FR|荷兰|NL|俄罗斯|RU|乌克兰|UA|意大利|IT|西班牙|ES|瑞典|SE|挪威|NO|瑞士|CH|波兰|PL)'
      include-all: false
      interval: 300
      timeout: 3000
      lazy: true
      icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Europe_Map.png

    - name: 其他节点
      type: select
      use: ['AllBlue', 'BitzNet']
      exclude-filter: '(香港|HK|Hong|HKG|新加坡|狮城|SG|Sing|马来西亚|MY|台湾|台灣|TW|日本|JP|韩国|KR|越南|VN|泰国|TH|印度|IN|印尼|ID|菲律宾|PH|柬埔寨|KH|孟加拉|BD|斯里兰卡|LK|巴基斯坦|PK|哈萨克|KZ|美国|US|英国|UK|加拿大|CA|德国|DE|法国|FR|荷兰|NL|俄罗斯|RU|乌克兰|UA|意大利|IT|西班牙|ES|瑞典|SE|挪威|NO|瑞士|CH|波兰|PL)'
      include-all: false
      interval: 300
      timeout: 3000
      lazy: true
      icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/World_Map.png

# ========== Rules ==========
rules:
    - RULE-SET,ad,广告拦截
    - GEOSITE,CN,DIRECT
    - GEOIP,CN,DIRECT

    - RULE-SET,openai,人工智能
    - RULE-SET,copilot,人工智能
    - RULE-SET,bing,人工智能
    - RULE-SET,claude,人工智能
    - RULE-SET,google,谷歌服务
    - RULE-SET,microsoft,微软服务
    - RULE-SET,github,微软服务
    - RULE-SET,telegram,社交服务
    - RULE-SET,twitter,社交服务
    - RULE-SET,steam,游戏娱乐
    - RULE-SET,epic,游戏娱乐

    - MATCH,全球加速
